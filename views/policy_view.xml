<?xml version="1.0" encoding="utf-8"?>
<odoo>
	 <record id="view_policy_sales_list_inherit" model="ir.ui.view">
        	<field name="name">Policy list</field>
        	<field name="model">sale.order</field>
        	<field name="inherit_id" ref="sale.view_order_tree"/>
        	<field name="arch" type="xml">
				<xpath expr="//field[@name='amount_total']" position="after">
					<field name="doc_type" invisible="1" />
					<field name="start_date" invisible="doc_type == 'order'" />
					<field name="end_date" invisible="doc_type == 'order'" />
				</xpath>
				
				<xpath expr="//field[@name='state']" position="attributes">
					<attribute name="invisible">doc_type == 'policy'</attribute>
				</xpath>
        </field>
    </record>

    <record id="view_policy_sales_inherit" model="ir.ui.view">
        	<field name="name">Policy</field>
        	<field name="model">sale.order</field>
        	<field name="inherit_id" ref="sale.view_order_form"/>
        	<field name="arch" type="xml">
				<xpath expr="//field[@name='partner_id']" position="after">
					<field name="doc_type" readonly="1" />
					<field name="summary" readonly="1" invisible="doc_type == 'order'" />
				</xpath>
				
				<xpath expr="//field[@name='date_order']" position="after">
					<field name="start_date" readonly="state != 'draft'" invisible="doc_type == 'order'" />
					<field name="end_date" readonly="state != 'draft'" invisible="doc_type == 'order'" />
					<field name="policy_start" readonly="state != 'draft'" invisible="doc_type == 'order'" />
				</xpath>
				
				<xpath expr="//field[@name='date_order']" position="attributes">
					<attribute name="invisible">doc_type == 'policy'</attribute>
				</xpath>
				
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/list/field[@name='product_uom_qty']" position="after">
					<field name="parent_doc_type" invisible="1" />
					<field name="enrollee_id" invisible="parent_doc_type == 'order'" groups="hmo_management.group_enrollee_admin"/>
					<field name="duration" readonly="parent_doc_type == 'policy1'" groups="hmo_management.group_enrollee_admin" />
				</xpath>
				
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/list/field[@name='product_uom_qty']" position="attributes">
					<attribute name="readonly">parent_doc_type == 'policy'</attribute>
				</xpath>
		</field>
	</record>
         
   
   <record id = "draft_policy_action" model = "ir.actions.act_window">
        <field name = "name">Draft Policies</field>
        <field name = "type">ir.actions.act_window</field>
        <field name = "res_model">sale.order</field>
        <field name = "view_mode">list,form</field>
		<field name="context">{'default_doc_type': 'policy'}</field>
		<field name="domain">[('state','in',('draft', 'sent', 'cancel')),('doc_type','=','policy')]</field>
        
   </record>
   
   <record id = "policy_action" model = "ir.actions.act_window">
        <field name = "name">Policies</field>
        <field name = "type">ir.actions.act_window</field>
        <field name = "res_model">sale.order</field>
        <field name = "view_mode">list,form</field>
		<field name="context">{'default_doc_type': 'policy'}</field>
		  <field name="domain">[('state', 'not in', ('draft', 'sent', 'cancel')),('doc_type','=','policy')]</field>
       
   </record>
   
   <record id="sale.action_orders" model="ir.actions.act_window">
        <field name="name">Sales Orders</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">list,kanban,form,calendar,pivot,graph,activity</field>
        <field name="search_view_id" ref="sale.sale_order_view_search_inherit_sale"/>
        <field name="context">{'default_doc_type': 'order'}</field>
        <field name="domain">[('state', 'not in', ('draft', 'sent', 'cancel')),('doc_type','=','order')]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new quotation, the first step of a new sale!
            </p><p>
                Once the quotation is confirmed, it becomes a sales order.<br/> You will be able to create an invoice and collect the payment.
            </p>
        </field>
    </record>
   
    <record id="sale.action_quotations" model="ir.actions.act_window">
        <field name="name">Quotations</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">list,kanban,form,calendar,pivot,graph,activity</field>
        <field name="search_view_id" ref="sale.sale_order_view_search_inherit_quotation"/>
        <field name="context">{'search_default_my_quotation': 1, 'default_doc_type': 'order'}</field>
		<field name="domain">[('doc_type','=','order')]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
            Create a new quotation, the first step of a new sale!
            </p><p>
            Once the quotation is confirmed by the customer, it becomes a sales order.<br/> You will be able to create an invoice and collect the payment.
            </p>
        </field>
    </record>
</odoo>